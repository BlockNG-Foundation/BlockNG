(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[21],{411:function(e,t,a){"use strict";var n,o=a(0),s=a.n(o),r=a(109),i=a(424),c=a.n(i),l=a(413),d=a.n(l),p=a(414),u=a.n(p),m=a(415),b=a.n(m),w=a(416),h=a.n(w),f=a(417),v=a.n(f),g=a(418),y=a.n(g),k=a(419),S=a.n(k),O=a(420),E=a.n(O),x=a(421),C=a.n(x),N=a(422),j=a.n(N),I=a(425),T=a.n(I),R=a(423),A=a.n(R);a(426);let D=Object(r.b)("pool")(n=Object(r.c)(n=class extends s.a.Component{constructor(e){super(e),this.state={}}render(){const{title:e,desc:t,type:a,large:n,flip:o}=this.props;let r=c.a,i=!1,l=!1;switch(a){case"credit":r=d.a;break;case"seeder":r=u.a;break;case"airdrop":r=b.a;break;case"rebase":r=h.a,i=!0;break;case"punks":l=!0;break;case"pawn":r=y.a;break;case"cry":r=v.a;break;case"liquidity":r=E.a;break;case"swap":r=S.a;break;case"vote":r=C.a;break;case"bridge":r=j.a;break;case"base":r=T.a;break;case"freedom":r=A.a}return s.a.createElement("div",{id:"slogan-main"},l?s.a.createElement(s.a.Fragment,null):s.a.createElement("div",{className:"global-tv"},s.a.createElement("img",{className:"slogan-img ".concat(n?"large":""," ").concat(i?"anim":""," ").concat(o?"flip":""),src:r,alt:""})),s.a.createElement("div",{className:"global-h1 global-tv slogan-title"},e),s.a.createElement("div",{className:"global-desc slogan-desc"},t))}})||n)||n;t.a=D},413:function(e,t,a){e.exports=a.p+"static/media/credit.b7e89a28.png"},414:function(e,t,a){e.exports=a.p+"static/media/seeder.c0ecec20.png"},415:function(e,t,a){e.exports=a.p+"static/media/airdrop.79057ee1.png"},416:function(e,t,a){e.exports=a.p+"static/media/rebase.761d56e9.png"},417:function(e,t,a){e.exports=a.p+"static/media/cry.7cc3570d.png"},418:function(e,t,a){e.exports=a.p+"static/media/pawn.b0b8691c.png"},419:function(e,t,a){e.exports=a.p+"static/media/swap.01832c14.png"},420:function(e,t,a){e.exports=a.p+"static/media/liquidity.5b550d49.png"},421:function(e,t,a){e.exports=a.p+"static/media/vote.f75c10b9.png"},422:function(e,t,a){e.exports=a.p+"static/media/bridge.bb87a277.png"},423:function(e,t,a){e.exports=a.p+"static/media/freedom.ed224dc7.png"},424:function(e,t,a){e.exports=a.p+"static/media/foundation.312aeed2.svg"},425:function(e,t,a){e.exports=a.p+"static/media/baseBridge.87f0e01a.svg"},426:function(e,t,a){},434:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(97),o=Object(n.a)("success","processing","error","default","warning"),s=Object(n.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")},436:function(e,t,a){"use strict";var n=a(7),o=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},r=a(35),i=function(e,t){return o.createElement(r.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:s}))},c=o.forwardRef(i);t.a=c},449:function(e,t,a){e.exports=a.p+"static/media/law.f77390e4.svg"},454:function(e,t,a){"use strict";var n=a(6),o=a(16),s=a(8),r=a(30),i=a.n(r),c=a(26),l=a(7),d=a(44),p=a(0),u=a(453),m={adjustX:1,adjustY:1},b=[0,0],w={left:{points:["cr","cl"],overflow:m,offset:[-4,0],targetOffset:b},right:{points:["cl","cr"],overflow:m,offset:[4,0],targetOffset:b},top:{points:["bc","tc"],overflow:m,offset:[0,-4],targetOffset:b},bottom:{points:["tc","bc"],overflow:m,offset:[0,4],targetOffset:b},topLeft:{points:["bl","tl"],overflow:m,offset:[0,-4],targetOffset:b},leftTop:{points:["tr","tl"],overflow:m,offset:[-4,0],targetOffset:b},topRight:{points:["br","tr"],overflow:m,offset:[0,-4],targetOffset:b},rightTop:{points:["tl","tr"],overflow:m,offset:[4,0],targetOffset:b},bottomRight:{points:["tr","br"],overflow:m,offset:[0,4],targetOffset:b},rightBottom:{points:["bl","br"],overflow:m,offset:[4,0],targetOffset:b},bottomLeft:{points:["tl","bl"],overflow:m,offset:[0,4],targetOffset:b},leftBottom:{points:["br","bl"],overflow:m,offset:[-4,0],targetOffset:b}};function h(e){var t=e.showArrow,a=e.arrowContent,n=e.children,o=e.prefixCls,s=e.id,r=e.overlayInnerStyle,c=e.className,l=e.style;return p.createElement("div",{className:i()("".concat(o,"-content"),c),style:l},!1!==t&&p.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},a),p.createElement("div",{className:"".concat(o,"-inner"),id:s,role:"tooltip",style:r},"function"===typeof n?n():n))}var f=function(e,t){var a=e.overlayClassName,n=e.trigger,o=void 0===n?["hover"]:n,r=e.mouseEnterDelay,i=void 0===r?0:r,m=e.mouseLeaveDelay,b=void 0===m?.1:m,f=e.overlayStyle,v=e.prefixCls,g=void 0===v?"rc-tooltip":v,y=e.children,k=e.onVisibleChange,S=e.afterVisibleChange,O=e.transitionName,E=e.animation,x=e.motion,C=e.placement,N=void 0===C?"right":C,j=e.align,I=void 0===j?{}:j,T=e.destroyTooltipOnHide,R=void 0!==T&&T,A=e.defaultVisible,D=e.getTooltipContainer,P=e.overlayInnerStyle,B=e.arrowContent,L=e.overlay,V=e.id,U=e.showArrow,M=Object(d.a)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"]),_=Object(p.useRef)(null);Object(p.useImperativeHandle)(t,(function(){return _.current}));var F=Object(l.a)({},M);"visible"in e&&(F.popupVisible=e.visible);var W=!1,q=!1;if("boolean"===typeof R)W=R;else if(R&&"object"===Object(c.a)(R)){var z=R.keepParent;W=!0===z,q=!1===z}return p.createElement(u.a,Object(s.a)({popupClassName:a,prefixCls:g,popup:function(){return p.createElement(h,{showArrow:U,arrowContent:B,key:"content",prefixCls:g,id:V,overlayInnerStyle:P},L)},action:o,builtinPlacements:w,popupPlacement:N,ref:_,popupAlign:I,getPopupContainer:D,onPopupVisibleChange:k,afterPopupVisibleChange:S,popupTransitionName:O,popupAnimation:E,popupMotion:x,defaultPopupVisible:A,destroyPopupOnHide:W,autoDestroy:q,mouseLeaveDelay:b,popupStyle:f,mouseEnterDelay:i},F),y)},v=Object(p.forwardRef)(f),g=a(412),y=a(91),k=a(434),S=a(100),O={adjustX:1,adjustY:1},E={adjustX:0,adjustY:0},x=[0,0];function C(e){return"boolean"===typeof e?e?O:E:Object(s.a)(Object(s.a)({},E),e)}var N=a(112),j=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},I=new RegExp("^(".concat(k.a.join("|"),")(-inverse)?$"));function T(e,t){var a=e.type;if((!0===a.__ANT_BUTTON||"button"===e.type)&&e.props.disabled||!0===a.__ANT_SWITCH&&(e.props.disabled||e.props.loading)||!0===a.__ANT_RADIO&&e.props.disabled){var n=function(e,t){var a={},n=Object(s.a)({},e);return t.forEach((function(t){e&&t in e&&(a[t]=e[t],delete n[t])})),{picked:a,omitted:n}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),o=n.picked,r=n.omitted,c=Object(s.a)(Object(s.a)({display:"inline-block"},o),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),l=Object(s.a)(Object(s.a)({},r),{pointerEvents:"none"}),d=Object(N.a)(e,{style:l,className:null});return p.createElement("span",{style:c,className:i()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},d)}return e}var R=p.forwardRef((function(e,t){var a=p.useContext(y.b),r=a.getPopupContainer,c=a.getPrefixCls,l=a.direction;var d=Object(g.a)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),u=Object(o.a)(d,2),m=u[0],b=u[1],h=function(){var t=e.title,a=e.overlay;return!t&&!a&&0!==t},f=function(){var t=e.builtinPlacements,a=e.arrowPointAtCenter,n=void 0!==a&&a,o=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,a=void 0===t?4:t,n=e.horizontalArrowShift,o=void 0===n?16:n,r=e.verticalArrowShift,i=void 0===r?8:r,c=e.autoAdjustOverflow,l=e.arrowPointAtCenter,d={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+a),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(i+a)]},topRight:{points:["br","tc"],offset:[o+a,-4]},rightTop:{points:["tl","cr"],offset:[4,-(i+a)]},bottomRight:{points:["tr","bc"],offset:[o+a,4]},rightBottom:{points:["bl","cr"],offset:[4,i+a]},bottomLeft:{points:["tl","bc"],offset:[-(o+a),4]},leftBottom:{points:["br","cl"],offset:[-4,i+a]}};return Object.keys(d).forEach((function(e){d[e]=l?Object(s.a)(Object(s.a)({},d[e]),{overflow:C(c),targetOffset:x}):Object(s.a)(Object(s.a)({},w[e]),{overflow:C(c)}),d[e].ignoreShake=!0})),d}({arrowPointAtCenter:n,autoAdjustOverflow:void 0===o||o})},k=e.getPopupContainer,O=e.placement,E=void 0===O?"top":O,R=e.mouseEnterDelay,A=void 0===R?.1:R,D=e.mouseLeaveDelay,P=void 0===D?.1:D,B=j(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay"]),L=e.prefixCls,V=e.openClassName,U=e.getTooltipContainer,M=e.overlayClassName,_=e.color,F=e.overlayInnerStyle,W=e.children,q=c("tooltip",L),z=c(),H=m;"open"in e||"visible"in e||!h()||(H=!1);var $=T(Object(N.c)(W)&&!Object(N.b)(W)?W:p.createElement("span",null,W),q),X=$.props,Y=X.className&&"string"!==typeof X.className?X.className:i()(X.className,Object(n.a)({},V||"".concat(q,"-open"),!0)),J=i()(M,Object(n.a)(Object(n.a)({},"".concat(q,"-rtl"),"rtl"===l),"".concat(q,"-").concat(_),_&&I.test(_))),K=F,G={};return _&&!I.test(_)&&(K=Object(s.a)(Object(s.a)({},F),{background:_}),G={"--antd-arrow-background-color":_}),p.createElement(v,Object(s.a)({},B,{placement:E,mouseEnterDelay:A,mouseLeaveDelay:P,prefixCls:q,overlayClassName:J,getTooltipContainer:k||U||r,ref:t,builtinPlacements:f(),overlay:function(){var t=e.title,a=e.overlay;return 0===t?t:a||t||""}(),visible:H,onVisibleChange:function(t){var a,n;b(!h()&&t),h()||(null===(a=e.onOpenChange)||void 0===a||a.call(e,t),null===(n=e.onVisibleChange)||void 0===n||n.call(e,t))},onPopupAlign:function(e,t){var a=f(),n=Object.keys(a).find((function(e){var n,o;return a[e].points[0]===(null===(n=t.points)||void 0===n?void 0:n[0])&&a[e].points[1]===(null===(o=t.points)||void 0===o?void 0:o[1])}));if(n){var o=e.getBoundingClientRect(),s={top:"50%",left:"50%"};/top|Bottom/.test(n)?s.top="".concat(o.height-t.offset[1],"px"):/Top|bottom/.test(n)&&(s.top="".concat(-t.offset[1],"px")),/left|Right/.test(n)?s.left="".concat(o.width-t.offset[0],"px"):/right|Left/.test(n)&&(s.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(s.left," ").concat(s.top)}},overlayInnerStyle:K,arrowContent:p.createElement("span",{className:"".concat(q,"-arrow-content"),style:G}),motion:{motionName:Object(S.b)(z,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),H?Object(N.a)($,{className:Y}):$)}));t.a=R},471:function(e,t,a){e.exports=a.p+"static/media/lawUSD.0bf8078b.svg"},547:function(e,t,a){"use strict";var n=a(7),o=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},r=a(35),i=function(e,t){return o.createElement(r.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:s}))},c=o.forwardRef(i);t.a=c},619:function(e,t,a){e.exports=a.p+"static/media/bch.517565c8.svg"},620:function(e,t,a){},705:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(109),r=a(23),i=a.n(r),c=a(454),l=a(547),d=a(436),p=a(1),u=a.n(p),m=a(183),b=a(411),w=a(2),h=a(13),f=a(9);const v=f.a.contract,g=async(e,t,a,n)=>{Object(w.p)({key:"swap"});const o=await Object(w.m)(v.stableSwap,"swapExactTokensForTokens(uint256,uint256,address[],address,uint256)",["0x".concat(new u.a(e).times(a[0].precision).toString(16)),"0x".concat(new u.a(t).times(a[1].precision).times(.995).integerValue(u.a.ROUND_DOWN).toString(16)),[a[0].token.address,a[1].token.address],n,Math.floor(Date.now()/1e3)+60]);return await Object(w.n)({tx:o,key:"swap"})},y=async(e,t,a,n)=>{Object(w.p)({key:"swap"});const o=await Object(w.m)(v.stableSwap,"swapTokensForExactTokens(uint256,uint256,address[],address,uint256)",["0x".concat(new u.a(t).times(a[0].precision).toString(16)),"0x".concat(new u.a(e).times(a[1].precision).div(.995).integerValue(u.a.ROUND_DOWN).toString(16)),[a[0].token.address,a[1].token.address],n,Math.floor(Date.now()/1e3)+60]);return await Object(w.n)({tx:o,key:"swap"})},k=async(e,t)=>{let a=f.a.fakeUserAddress;e&&(a=e);let n=new u.a(0),o=!1;const{result:s}=await Object(w.o)(t.token,"allowance(address,address)",[a,v.stableLendBox.address]);return s&&(n=new u.a(s._hex).div(t.precision),o=!0),{allowance:n,success:o}},S=async e=>{Object(w.p)({key:"approve"});const t=await Object(w.m)(e.token,"approve(address,uint256)",[v.stableLendBox.address,h.a.constants.MaxUint256]);return await Object(w.n)({tx:t,key:"approve"})},O=async(e,t)=>{let a=f.a.fakeUserAddress;e&&(a=e);let n=new u.a(0),o=new u.a(0),s=new u.a(0),r=new u.a(0),i=new u.a(0),c=new u.a(0),l=new u.a(0),d=new u.a(0),p=new u.a(0),m=new u.a(0),b=new u.a(0),h=new u.a(0),g=!1;const{result:y}=await Object(w.o)(v.stableLendMarket[t.symbol.toLowerCase()],"positionInfo(address)",[a]);if(y){let e=0;const{precision:a}=t,{precision:w}=v.stableShit,{maxCollateralRatio:f,safeBorrowRatio:k,borrowFee:S,minKeepCollateral:O}=v.stableLendMarket;n=new u.a(y[e++]._hex).div(a),o=new u.a(y[e++]._hex),s=new u.a(y[e++]._hex).div(w),i=new u.a(y[e++]._hex).div(w),c=new u.a(y[e++]._hex),l=new u.a(y[e++]._hex),p=s.times(f).minus(i).div(S),m=s.times(w).times(f).times(k).integerValue(u.a.ROUND_DOWN).div(w).minus(i),i.gt(0)&&(b=i.times(w).minus(1).div(w)),n.gt(0)&&(r=s.div(n),d=i.div(n.times(f)),h=i.gt(0)?s.minus(i.times(w).div(f).div(k).integerValue(u.a.ROUND_DOWN).div(w)).div(r).times(a).integerValue(u.a.ROUND_DOWN).minus(O).div(a):n),m.lt(0)&&(m=new u.a(0)),h.lt(0)&&(h=new u.a(0)),g=!0}return{deposited:n,depositedShare:o,depositedValue:s,cPrice:r,borrowed:i,borrowedPart:c,borrowedShare:l,lPrice:d,canBorrow:p,safeBorrow:m,maxRepay:b,safeRemove:h,success:g}};var E,x=a(449),C=a.n(x),N=a(471),j=a.n(N),I=a(619),T=a.n(I);a(620);class R extends o.a.Component{constructor(){super(...arguments),this.onInputChange=e=>{this.props.onInputChange&&this.props.onInputChange(e)},this.onOutputChange=e=>{this.props.onOutputChange&&this.props.onOutputChange(e)},this.onSwapClick=()=>{this.props.onSwapClick&&this.props.onSwapClick()}}render(){const{balance:e,btnDisabled:t,inputSymbol:a,outputSymbol:n,inputStr:s,outputStr:r,priceImpact:c}=this.props;return o.a.createElement(m.e,null,o.a.createElement("div",{className:"pawn-card"},o.a.createElement("div",{className:"global-number pawn-balance"},o.a.createElement("span",{className:"global-desc"},i.a.get("pawn.balance")),o.a.createElement(m.f,{end:e,suffix:a})),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:t,suffix:a,value:s,onChange:this.onInputChange}),o.a.createElement("div",{className:"pawn-card-icon"},o.a.createElement(l.a,null)),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:t,suffix:n,value:r,onChange:this.onOutputChange}),o.a.createElement(m.o,{priceImpact:c}),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:t,onClick:this.onSwapClick},i.a.get("pawn.swap")))))}}class A extends o.a.Component{render(){const{title:e,number:t}=this.props;return o.a.createElement("div",{className:"global-desc pawn-info-desc"},o.a.createElement(c.a,{title:i.a.get("pawn.".concat(e,"Desc"))},o.a.createElement("span",null,i.a.get("pawn.".concat(e)),o.a.createElement(d.a,null))),o.a.createElement("span",{className:"yellow"},t))}}class D extends o.a.Component{constructor(e){var t;super(e),t=this,this.unmount=!1,this.componentDidMount=()=>{this.unmount=!1,this.getLendInfo()},this.componentWillUnmount=()=>{this.unmount=!0},this.getLendInfo=async function(){let{once:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{user:a,token:n}=t.props,{deposited:o,depositedShare:s,depositedValue:r,cPrice:i,borrowed:c,borrowedPart:l,borrowedShare:d,lPrice:p,canBorrow:u,safeBorrow:m,maxRepay:b,safeRemove:w,success:h}=await O(a,n);t.unmount||(h&&t.setState({deposited:o,depositedShare:s,depositedValue:r,cPrice:i,borrowed:c,borrowedPart:l,borrowedShare:d,lPrice:p,canBorrow:u,safeBorrow:m,maxRepay:b,safeRemove:w}),e||setTimeout(()=>{t.getLendInfo()},6e3))},this.onInputChange=(e,t,a)=>{const{value:n}=e.target;if(n){const{amountFormat:e}=this.props,o=e(n,a.decimals);o&&this.setState({[t]:o})}else this.setState({[t]:""})},this.onMaxAddClick=()=>{const{depoistTokenBalance:e}=this.props;this.setState({addStr:e.toString()})},this.onMaxBorrowClick=()=>{const{safeBorrow:e}=this.state;this.setState({borrowStr:e.toString()})},this.onMaxRepayClick=()=>{const{lendTokenBalance:e}=this.props,{maxRepay:t}=this.state;let a=t;e.lt(t)&&(a=e),this.setState({repayStr:a.toString()})},this.onMaxRemoveClick=()=>{const{safeRemove:e}=this.state;this.setState({removeStr:e.toString()})},this.afterAction=async e=>{e?setTimeout(async()=>{await this.getLendInfo({once:!0}),this.setState({btnDisabled:!1})},3e3):this.setState({btnDisabled:!1})},this.onAddClick=async()=>{const{addStr:e}=this.state,{user:t,token:a,depositTokenAllowance:n,masterApproved:o}=this.props;if(!e)return;if(new u.a(e).eq(0))return;if(this.setState({btnDisabled:!0}),!o){if(!await(async e=>{Object(w.p)({key:"approve"});const t=await Object(w.m)(v.stableLendBox,"setMasterContractApproval(address,address,bool,uint8,bytes32,bytes32)",[e,v.stableLendMarket.masterContract,!0,0,"0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000"]);return await Object(w.n)({tx:t,key:"approve"})})(t))return void this.setState({btnDisabled:!1})}if(n.lt(e)){if(!await S(a))return void this.setState({btnDisabled:!1})}const s=await(async(e,t,a)=>{Object(w.p)({key:"add"});const{defaultAbiCoder:n}=h.a.utils,o="0x".concat(new u.a(a).times(t.precision).integerValue(u.a.ROUND_DOWN).toString(16)),s=[n.encode(["address","address","int256","int256"],[t.token.address,e,o,0]),n.encode(["int256","address","bool"],[-2,e,!1])],r=await Object(w.m)(v.stableLendMarket[t.symbol.toLowerCase()],"cook(uint8[],uint256[],bytes[])",[[20,10],[0,0],s]);return await Object(w.n)({tx:r,key:"add"})})(t,a,e);this.afterAction(s)},this.onBorrowClick=async()=>{const{borrowStr:e}=this.state,{user:t,token:a}=this.props;if(!e)return;if(new u.a(e).eq(0))return;this.setState({btnDisabled:!0});const n=await(async(e,t,a)=>{Object(w.p)({key:"borrow"});const{defaultAbiCoder:n}=h.a.utils,o="0x".concat(new u.a(a).times(v.stableShit.precision).integerValue(u.a.ROUND_DOWN).toString(16)),s="0x".concat(new u.a(o).minus(1).toString(16)),r=[n.encode(["int256","address"],[o,e]),n.encode(["address","address","int256","int256"],[v.stableShit.token.address,e,s,0])],i=await Object(w.m)(v.stableLendMarket[t.symbol.toLowerCase()],"cook(uint8[],uint256[],bytes[])",[[5,21],[0,0],r]);return await Object(w.n)({tx:i,key:"borrow"})})(t,a,e);this.afterAction(n)},this.onRepayClick=async()=>{const{repayStr:e}=this.state,{user:t,token:a,lendToken:n,lendTokenAllowance:o}=this.props;if(!e)return;if(new u.a(e).eq(0))return;if(this.setState({btnDisabled:!0}),o.lt(e)){if(!await S(n))return void this.setState({btnDisabled:!1})}const s=await(async(e,t,a)=>{Object(w.p)({key:"repay"});const{defaultAbiCoder:n}=h.a.utils,o="0x".concat(new u.a(a).times(v.stableShit.precision).integerValue(u.a.ROUND_DOWN).toString(16)),s="0x".concat(new u.a(o).minus(1).toString(16)),r=[n.encode(["address","address","int256","int256"],[v.stableShit.token.address,e,o,0]),n.encode(["int256"],[s]),n.encode(["int256","address","bool"],[-1,e,!1])],i=await Object(w.m)(v.stableLendMarket[t.symbol.toLowerCase()],"cook(uint8[],uint256[],bytes[])",[[20,7,2],[0,0,0],r]);return await Object(w.n)({tx:i,key:"repay"})})(t,a,e);this.afterAction(s)},this.onRepayAllClick=async()=>{const{borrowed:e,borrowedPart:t}=this.state,{user:a,token:n,lendToken:o,lendTokenAllowance:s}=this.props;if(this.setState({btnDisabled:!0}),s.lt(e)){if(!await S(o))return void this.setState({btnDisabled:!1})}const r=await(async(e,t,a)=>{Object(w.p)({key:"repay"});const{defaultAbiCoder:n}=h.a.utils,o="0x".concat(new u.a(a).toString(16)),s=[n.encode(["int256"],[o]),n.encode(["address","address","int256","int256"],[v.stableShit.token.address,e,0,-1]),n.encode(["int256","address","bool"],[o,e,!1])],r=await Object(w.m)(v.stableLendMarket[t.symbol.toLowerCase()],"cook(uint8[],uint256[],bytes[])",[[6,20,2],[0,0,0],s]);return await Object(w.n)({tx:r,key:"repay"})})(a,n,t);this.afterAction(r)},this.onRemoveClick=async()=>{const{removeStr:e}=this.state,{user:t,token:a}=this.props;if(!e)return;if(new u.a(e).eq(0))return;this.setState({btnDisabled:!0});const n=await(async(e,t,a)=>{Object(w.p)({key:"remove"});const{defaultAbiCoder:n}=h.a.utils,o="0x".concat(new u.a(a).times(t.precision).integerValue(u.a.ROUND_DOWN).toString(16)),s=[n.encode(["int256","address"],[o,e]),n.encode(["address","address","int256","int256"],[t.token.address,e,0,o])],r=await Object(w.m)(v.stableLendMarket[t.symbol.toLowerCase()],"cook(uint8[],uint256[],bytes[])",[[4,21],[0,0],s]);return await Object(w.n)({tx:r,key:"remove"})})(t,a,e);this.afterAction(n)},this.state={deposited:new u.a(0),depositedShare:new u.a(0),depositedValue:new u.a(0),cPrice:new u.a(0),borrowed:new u.a(0),borrowedPart:new u.a(0),borrowedShare:new u.a(0),lPrice:new u.a(0),canBorrow:new u.a(0),safeBorrow:new u.a(0),maxRepay:new u.a(0),safeRemove:new u.a(0),addStr:"",borrowStr:"",repayStr:"",removeStr:"",btnDisabled:!1}}render(){const{deposited:e,depositedValue:t,borrowed:a,lPrice:n,canBorrow:s,addStr:r,borrowStr:c,repayStr:l,removeStr:d,btnDisabled:p}=this.state,{depoistTokenBalance:u,lendTokenBalance:b,token:w,tokenImg:h,lendToken:f,lendTokenImg:v}=this.props;return o.a.createElement("div",{className:"pawn-flex"},o.a.createElement("div",{className:"pawn-flex-2"},o.a.createElement("div",{className:"pawn-borrow-control"},o.a.createElement("div",{className:"global-h1"},i.a.get("pawn.borrow")),o.a.createElement("div",{className:"pawn-borrow-control-content"},o.a.createElement("div",{className:"pawn-borrow-control-img"},o.a.createElement("img",{src:h,alt:""})),o.a.createElement("div",{className:"pawn-borrow-control-btns"},o.a.createElement("div",{className:"global-number pawn-balance"},o.a.createElement("span",{className:"global-desc"},i.a.get("pawn.balance")),o.a.createElement(m.f,{end:u,suffix:w.symbol})),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:p,value:r,suffix:w.symbol,enterButton:i.a.get("pawn.max"),onChange:e=>this.onInputChange(e,"addStr",w),onSearch:this.onMaxAddClick}),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:p,onClick:this.onAddClick},i.a.get("pawn.add"))))),o.a.createElement("div",{className:"pawn-borrow-control-content"},o.a.createElement("div",{className:"pawn-borrow-control-img"},o.a.createElement("img",{src:v,alt:""})),o.a.createElement("div",{className:"pawn-borrow-control-btns"},o.a.createElement("div",{className:"global-number pawn-balance"},o.a.createElement("span",{className:"global-desc"},i.a.get("pawn.leftToBorrow")),o.a.createElement(m.f,{end:s,suffix:f.symbol})),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:p,value:c,suffix:f.symbol,enterButton:i.a.get("pawn.safeMax"),onChange:e=>this.onInputChange(e,"borrowStr",f),onSearch:this.onMaxBorrowClick}),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:p,onClick:this.onBorrowClick},i.a.get("pawn.borrow"))))),o.a.createElement("div",{className:"global-h1"},i.a.get("pawn.repay")),o.a.createElement("div",{className:"pawn-borrow-control-content"},o.a.createElement("div",{className:"pawn-borrow-control-img"},o.a.createElement("img",{src:v,alt:""})),o.a.createElement("div",{className:"pawn-borrow-control-btns"},o.a.createElement("div",{className:"global-number pawn-balance"},o.a.createElement("span",{className:"global-desc"},i.a.get("pawn.balance")),o.a.createElement(m.f,{end:b,suffix:f.symbol})),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:p,value:l,suffix:f.symbol,enterButton:i.a.get("pawn.max"),onChange:e=>this.onInputChange(e,"repayStr",f),onSearch:this.onMaxRepayClick}),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:p,onClick:this.onRepayClick},i.a.get("pawn.repay"))),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:p,onClick:this.onRepayAllClick},i.a.get("pawn.repayall"))))),o.a.createElement("div",{className:"pawn-borrow-control-content"},o.a.createElement("div",{className:"pawn-borrow-control-img"},o.a.createElement("img",{src:h,alt:""})),o.a.createElement("div",{className:"pawn-borrow-control-btns"},o.a.createElement("div",{className:"global-number pawn-balance"},o.a.createElement("span",{className:"global-desc"},i.a.get("pawn.collateral")),o.a.createElement(m.f,{end:e,suffix:w.symbol})),o.a.createElement(m.h,{placeholder:i.a.get("pawn.placeholder"),disabled:p,value:d,suffix:w.symbol,enterButton:i.a.get("pawn.safeMax"),onChange:e=>this.onInputChange(e,"removeStr",w),onSearch:this.onMaxRemoveClick}),o.a.createElement("div",{className:"pawn-card-btn"},o.a.createElement(m.d,{disabled:p,onClick:this.onRemoveClick},i.a.get("pawn.remove"))))))),o.a.createElement("div",{className:"pawn-open-card"},o.a.createElement(m.e,null,o.a.createElement("div",{className:"pawn-open-card-content"},o.a.createElement("div",{className:"global-secondary"},i.a.get("pawn.myOpen")),o.a.createElement(A,{title:"collateralDeposited",number:o.a.createElement(m.f,{end:e})}),o.a.createElement(A,{title:"collateralValue",number:o.a.createElement(m.f,{prefix:"$",end:t})}),o.a.createElement(A,{title:"lawUSDBorrowed",number:o.a.createElement(m.f,{prefix:"$",end:a})}),o.a.createElement(A,{title:"liquidationPrice",number:o.a.createElement(m.f,{prefix:"$",end:n})}),o.a.createElement(A,{title:"lawUSDLeftToBorrow",number:o.a.createElement(m.f,{end:s})})))))}}let P=Object(s.b)("pool")(E=Object(s.c)(E=class extends o.a.Component{constructor(e){var t;super(e),t=this,this.unmount=!1,this.lawTabIndex=0,this.wbchTabIndex=1,this.componentDidMount=()=>{this.unmount=!1,this.props.pool.setUrlHash("pawn"),this.getPawnSwapInfo(),this.getPawnUserInfo()},this.componentWillUnmount=()=>{this.unmount=!0},this.getPawnSwapInfo=async()=>{const{etpReserve:e,usdReserve:t,price:a,success:n}=await(async()=>{let e=h.a.BigNumber.from(0),t=h.a.BigNumber.from(0),a=new u.a(0),n=!1;const{result:o}=await Object(w.o)(v.stableSwap,"getSwapInfo(address)",[v.stableSwap.address]);return o&&(e=o[0],t=o[1],a=new u.a(e._hex).div(t._hex),n=!0),{etpReserve:e,usdReserve:t,price:a,success:n}})();this.unmount||(n&&this.setState({swapLoaded:!0,etpReserve:e,usdReserve:t,originalPrice:a}),setTimeout(()=>{this.getPawnSwapInfo()},6e3))},this.getPawnUserInfo=async()=>{const{address:e}=this.props.pool;if(!e)return void setTimeout(()=>{this.getPawnUserInfo()},1e3);const{approved:t,success:a}=await(async e=>{let t=f.a.fakeUserAddress;e&&(t=e);let a=!1,n=!1;const{result:o}=await Object(w.o)(v.stableLendBox,"masterContractApproved(address,address)",[v.stableLendMarket.masterContract,t]);return null!==o&&(a=o,n=!0),{approved:a,success:n}})(e),{allowance:n,success:o}=await k(e,f.a.contract.shit),{allowance:s,success:r}=await k(e,f.a.contract.stableShit),{allowance:i,success:c}=await k(e,f.a.contract.wbch),{balance:l,success:d}=await(async(e,t)=>{let a=f.a.fakeUserAddress;e&&(a=e);let n=new u.a(0),o=!1;const{result:s}=await Object(w.o)(t.token,"balanceOf(address)",[a]);return s&&(n=new u.a(s._hex).div(v.stableShit.precision),o=!0),{balance:n,success:o}})(e,f.a.contract.wbch);this.unmount||(a&&this.setState({masterApproved:t}),o&&this.setState({lawAllowance:n}),r&&this.setState({lawUsdAllowance:s}),c&&this.setState({wbchAllowance:i}),d&&this.setState({wbchBalance:l}),setTimeout(()=>{this.getPawnUserInfo()},6e3))},this.amountFormat=(e,t)=>{let a="";if(e){const{valid:n,str:o}=Object(w.i)(e,t);n&&(a=o)}return a},this.calcAmountIn=e=>{let{outVal:t,inToken:a,outToken:n,inReserve:o,outReserve:s}=e,r="";const i=this.amountFormat(t,n.decimals);if(i){const e=new u.a(i).times(n.precision).toString(16),t=((e,t,a)=>{e=h.a.BigNumber.from(e);const n=t.mul(e).mul(1e3),o=a.sub(e).mul(997),s=n.div(o).add(1);return new u.a(s._hex)})("0x".concat(e),o,s);r=new u.a(t).div(a.precision).toString()}return{inStr:r,outStr:i}},this.calcAmountOut=e=>{let{inVal:t,inToken:a,outToken:n,inReserve:o,outReserve:s}=e;const r=this.amountFormat(t,a.decimals);let i="";if(r){const e=new u.a(r).times(a.precision).toString(16),t=((e,t,a)=>{const n=(e=h.a.BigNumber.from(e)).mul(997),o=n.mul(a),s=t.mul(1e3).add(n),r=o.div(s);return new u.a(r._hex)})("0x".concat(e),o,s);i=new u.a(t).div(n.precision).toString()}return{inStr:r,outStr:i}},this.calcPriceImpact=function(e,a){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||new u.a(a).eq(0))return void(n?t.setState({etpPriceImpact:""}):t.setState({usdPriceImpact:""}));const{originalPrice:o}=t.state,s=new u.a(e).div(a),r=s.minus(o).abs().div(o).times(100)._toFixed(2,1);n?t.setState({etpPriceImpact:r}):t.setState({usdPriceImpact:r})},this.onEtpInputChange=e=>{const{value:t}=e.target,{inStr:a,outStr:n}=this.calcAmountOut({inVal:t,inToken:f.a.contract.sonOfShit,outToken:f.a.contract.stableShit,inReserve:this.state.etpReserve,outReserve:this.state.usdReserve});this.calcPriceImpact(a,n),this.setState({etpInput:a,usdOutput:n,etpExact:!0})},this.onUsdOutputChange=e=>{const{value:t}=e.target,{inStr:a,outStr:n}=this.calcAmountIn({outVal:t,inToken:f.a.contract.sonOfShit,outToken:f.a.contract.stableShit,inReserve:this.state.etpReserve,outReserve:this.state.usdReserve});this.calcPriceImpact(a,n),this.setState({etpInput:a,usdOutput:n,etpExact:!1})},this.swapEtp=async()=>{const{etpInput:e,usdOutput:t,etpExact:a}=this.state,{address:n}=this.props.pool,o=[f.a.contract.sonOfShit,f.a.contract.stableShit];this.setState({btnDisabled:!0}),a?(await g(e,t,o,n),this.setState({btnDisabled:!1})):(await y(e,t,o,n),this.setState({btnDisabled:!1}))},this.onUsdInputChange=e=>{const{value:t}=e.target,{inStr:a,outStr:n}=this.calcAmountOut({inVal:t,inToken:f.a.contract.stableShit,outToken:f.a.contract.sonOfShit,inReserve:this.state.usdReserve,outReserve:this.state.etpReserve});this.calcPriceImpact(n,a,!1),this.setState({usdInput:a,etpOutput:n,usdExact:!0})},this.onEtpOutputChange=e=>{const{value:t}=e.target,{inStr:a,outStr:n}=this.calcAmountIn({outVal:t,inToken:f.a.contract.stableShit,outToken:f.a.contract.sonOfShit,inReserve:this.state.usdReserve,outReserve:this.state.etpReserve});this.calcPriceImpact(n,a,!1),this.setState({usdInput:a,etpOutput:n,usdExact:!1})},this.swapUsd=async()=>{const{usdInput:e,etpOutput:t,usdExact:a}=this.state,{address:n}=this.props.pool,o=[f.a.contract.stableShit,f.a.contract.sonOfShit];this.setState({btnDisabled:!0}),a?(await g(e,t,o,n),this.setState({btnDisabled:!1})):(await y(e,t,o,n),this.setState({btnDisabled:!1}))},this.chooseBorrowToken=e=>{this.setState({borrowCurToken:e})},this.state={swapLoaded:!1,etpInput:"",usdOutput:"",etpPriceImpact:"",etpExact:!1,usdInput:"",etpOutput:"",usdPriceImpact:"",usdExact:!1,etpReserve:"",usdReserve:"",originalPrice:new u.a(0),btnDisabled:!1,masterApproved:!1,wbchBalance:new u.a(0),lawAllowance:new u.a(0),lawUsdAllowance:new u.a(0),wbchAllowance:new u.a(0),borrowTokenImgs:[C.a,T.a],borrowTokens:[f.a.contract.shit,f.a.contract.wbch],borrowCurToken:0,lendToken:f.a.contract.stableShit}}render(){const{swapLoaded:e,etpInput:t,usdOutput:a,usdInput:n,etpOutput:s,etpPriceImpact:r,usdPriceImpact:c,btnDisabled:l,masterApproved:d,wbchBalance:p,lawAllowance:u,lawUsdAllowance:w,wbchAllowance:h,borrowTokenImgs:v,borrowTokens:g,borrowCurToken:y,lendToken:k}=this.state,{address:S,tokenBalance:O,lawETPBalance:E,lawUSDBalance:x,isPhone:N}=this.props.pool;return o.a.createElement("div",{id:"pawn-main"},o.a.createElement(m.i,null,o.a.createElement(b.a,{title:i.a.get("pawn.title"),desc:i.a.get("pawn.desc"),type:"pawn"}),e?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"pawn-panel"},o.a.createElement(R,{balance:E,btnDisabled:l,inputSymbol:f.a.contract.sonOfShit.symbol,outputSymbol:f.a.contract.stableShit.symbol,inputStr:t,outputStr:a,priceImpact:r,onInputChange:this.onEtpInputChange,onOutputChange:this.onUsdOutputChange,onSwapClick:this.swapEtp}),o.a.createElement(R,{balance:x,btnDisabled:l,inputSymbol:f.a.contract.stableShit.symbol,outputSymbol:f.a.contract.sonOfShit.symbol,inputStr:n,outputStr:s,priceImpact:c,onInputChange:this.onUsdInputChange,onOutputChange:this.onEtpOutputChange,onSwapClick:this.swapUsd})),o.a.createElement("div",{className:"global-divider"}),o.a.createElement("div",{className:"pawn-flex"},o.a.createElement("div",{className:N?"pawn-flex-phone":"pawn-flex-2"},o.a.createElement("div",{className:"pawn-token-card ".concat(y===this.lawTabIndex?"":"inactive")},o.a.createElement(m.e,null,o.a.createElement("div",{className:"pawn-token-card-content borrow",onClick:()=>this.chooseBorrowToken(this.lawTabIndex)},o.a.createElement("img",{src:C.a,alt:""}),o.a.createElement("div",{className:"global-secondary"},i.a.get("pawn.choose"))))),o.a.createElement("div",{className:"pawn-token-card ".concat(y===this.wbchTabIndex?"":"inactive")},o.a.createElement(m.e,null,o.a.createElement("div",{className:"pawn-token-card-content borrow",onClick:()=>this.chooseBorrowToken(this.wbchTabIndex)},o.a.createElement("img",{src:T.a,alt:""}),o.a.createElement("div",{className:"global-secondary"},i.a.get("pawn.choose")))))),o.a.createElement("div",{className:"pawn-token-card"},o.a.createElement(m.e,null,o.a.createElement("div",{className:"pawn-token-card-content info"},o.a.createElement("div",null,o.a.createElement(A,{title:"maxCollateralRatio",number:"75%"}),o.a.createElement(A,{title:"liquidationFee",number:"12.5%"}),o.a.createElement(A,{title:"borrowFee",number:"0.5%"}),o.a.createElement(A,{title:"interest",number:"3%"})))))),y===this.lawTabIndex?o.a.createElement(D,{user:S,token:g[this.lawTabIndex],tokenImg:v[this.lawTabIndex],lendToken:k,lendTokenImg:j.a,depoistTokenBalance:O,lendTokenBalance:x,depositTokenAllowance:u,lendTokenAllowance:w,masterApproved:d,amountFormat:this.amountFormat}):o.a.createElement(o.a.Fragment,null),y===this.wbchTabIndex?o.a.createElement(D,{user:S,token:g[this.wbchTabIndex],tokenImg:v[this.wbchTabIndex],lendToken:k,lendTokenImg:j.a,depoistTokenBalance:p,lendTokenBalance:x,depositTokenAllowance:h,lendTokenAllowance:w,masterApproved:d,amountFormat:this.amountFormat}):o.a.createElement(o.a.Fragment,null)):o.a.createElement("div",{className:"pawn-loading"},o.a.createElement(m.j,null))))}})||E)||E;t.default=P}}]);