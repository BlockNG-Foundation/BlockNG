(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[29],{500:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),o=a.n(n),i=a(23),s=a.n(i),l=a(551),r=a(699);a(501);class c extends o.a.Component{render(){const{pairInfo:e={},allTokenMap:t={}}=this.props,{address:a,balance:n,token0Deposited:i,token1Deposited:c,token0:m={},token1:d={},shareOfPoolPercent:p}=e,u=t[m.address]||{},h=t[d.address]||{};return a?n.eq(0)?o.a.createElement(o.a.Fragment,null):o.a.createElement("div",{className:"swap-pair-info-extend"},o.a.createElement("div",{className:"swap-pair-info-row yellow"},s.a.get("swap.wallet")),o.a.createElement("div",{className:"swap-pair-info-row"},o.a.createElement("div",{className:"swap-pair-info"},o.a.createElement("div",{className:"swap-pair-info-icon"},u.image?o.a.createElement("img",{src:u.image,alt:""}):o.a.createElement(l.a,null),h.image?o.a.createElement("img",{src:h.image,alt:""}):o.a.createElement(l.a,null)),o.a.createElement("div",null,u.symbol," / ",h.symbol),o.a.createElement("div",{className:"swap-pair-info-copy"},o.a.createElement(r.a.Paragraph,{copyable:{text:e.address}}))),o.a.createElement("div",{className:"swap-pair-info-balance"},o.a.createElement("div",null,n._toSignificant()))),o.a.createElement("div",{className:"swap-pair-info-row"},o.a.createElement("div",{className:"swap-pair-info"},o.a.createElement("div",null,s.a.get("swap.pooledToken",{token:u.symbol}))),o.a.createElement("div",{className:"swap-pair-info-balance"},o.a.createElement("div",null,i._toSignificant()),o.a.createElement("div",{className:"swap-pair-info-icon right"},u.image?o.a.createElement("img",{src:u.image,alt:""}):o.a.createElement(l.a,null)))),o.a.createElement("div",{className:"swap-pair-info-row"},o.a.createElement("div",{className:"swap-pair-info"},o.a.createElement("div",null,s.a.get("swap.pooledToken",{token:h.symbol}))),o.a.createElement("div",{className:"swap-pair-info-balance"},o.a.createElement("div",null,c._toSignificant()),o.a.createElement("div",{className:"swap-pair-info-icon right"},h.image?o.a.createElement("img",{src:h.image,alt:""}):o.a.createElement(l.a,null)))),o.a.createElement("div",{className:"swap-pair-info-row"},o.a.createElement("div",{className:"swap-pair-info"},o.a.createElement("div",null,s.a.get("swap.shareOfPool"))),o.a.createElement("div",{className:"swap-pair-info-balance"},o.a.createElement("div",null,p)))):o.a.createElement(o.a.Fragment,null)}}},501:function(e,t,a){},624:function(e,t,a){},678:function(e,t,a){"use strict";var n=a(7),o=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},s=a(35),l=function(e,t){return o.createElement(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))},r=o.forwardRef(l);t.a=r},693:function(e,t,a){"use strict";a.r(t);var n,o=a(0),i=a.n(o),s=a(109),l=a(23),r=a.n(l),c=a(678),m=a(708),d=a(1),p=a.n(d),u=a(183),h=a(461),k=a(462),f=a(500),g=a(411),E=a(2),w=a(98),v=a(9);a(624);const{latest:b}=v.a.path;let I=Object(s.b)("pool")(n=Object(s.c)(n=class extends i.a.Component{constructor(e){var t;super(e),t=this,this.unmount=!1,this.inputTokenRef=i.a.createRef(),this.outputTokenRef=i.a.createRef(),this.componentDidMount=()=>{this.unmount=!1,this.props.pool.setUrlHash("liquidity");const{pathname:e=""}=this.props.location;let t=v.a.contract.uniswapV2.defaultPoolTokens.token0,a=v.a.contract.uniswapV2.defaultPoolTokens.token1;Object(w.q)(e).then(e=>{let{tokenAMatch:n,tokenBMatch:o,tokenAInfo:i,tokenBInfo:s}=e;(n||o)&&(t=i,a=s),this.setState({token0Info:t,token1Info:a},()=>{this.inputTokenRef.current.findTokenInfo(),this.outputTokenRef.current.findTokenInfo(),this.genShareUrl(),this.getUserPairInfo({once:!0}),setTimeout(this.getUserPairInfo,3e3)})})},this.componentWillUnmount=()=>{this.unmount=!0},this.getUserPairInfo=async function(){let{once:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{address:a}=t.props.pool,{token0Info:n,token1Info:o}=t.state;t.getUserTokenBalance(n),t.getUserTokenBalance(o);const i=await Object(w.o)(a,n,o),s={};i.address&&i.totalSupply.gt(0)&&(s.token0Price=i.token0Balance.div(i.token1Balance)._toSignificant(),s.token1Price=i.token1Balance.div(i.token0Balance)._toSignificant()),t.unmount||(t.setState({pairInfo:i,pairLoaded:!0,...s},()=>{t.calcTokenAmount()}),e||setTimeout(()=>{t.getUserPairInfo()},5e3))},this.getUserTokenBalance=async e=>{const{address:t,allTokenMap:a}=this.props.pool,n=e.address;if(n){if(a[n])return;const{balance:e}=await Object(w.u)(t,n);this.props.pool.setTokenBalance(n,e)}},this.calcTokenAmount=()=>{const{pairInfo:e,token0Info:t,token1Info:a,token0Amount:n,token1Amount:o,token0Exact:i}=this.state;if(e.address&&e.totalSupply.gt(0)){const{token0Amount:s,token1Amount:l,poolShare:r}=Object(w.l)(e,t,a,n,o,i);return void this.setState({token0Amount:s,token1Amount:l,poolShare:r})}let s="--",l="--",r="0";n&&o&&(s=new p.a(n).div(o)._toSignificant(),l=new p.a(o).div(n)._toSignificant(),r=100),this.setState({initialToken0Price:s,initialToken1Price:l,initialPoolShare:r})},this.genShareUrl=()=>{const{token0Info:e,token1Info:t}=this.state;this.props.history.replace("".concat(b.add).concat(Object(w.j)(e,t)))},this.onToken0Change=(e,t)=>{this.setState({token0Info:e},()=>{this.genShareUrl(),this.getUserPairInfo({once:!0}),t&&t()})},this.onToken1Change=(e,t)=>{this.setState({token1Info:e},()=>{this.genShareUrl(),this.getUserPairInfo({once:!0}),t&&t()})},this.amountFormat=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a="";if(e){const{valid:n,str:o}=Object(E.i)(e,t);n&&(a=o)}return a},this.afterInputChange=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"token0";"token0"!==a?t.setState({token1Amount:e,token0Exact:!1},()=>{t.calcTokenAmount()}):t.setState({token0Amount:e,token0Exact:!0},()=>{t.calcTokenAmount()})},this.onInputChange=(e,t)=>{const{value:a}=e.target,{allTokenMap:n}=this.props.pool;if(!a)return void this.afterInputChange("",t);if("token0"===t){const{token0Info:e}=this.state,{decimals:o}=n[e.address],i=this.amountFormat(a,o);return void(i&&this.afterInputChange(i,t))}const{token1Info:o}=this.state,{decimals:i}=n[o.address],s=this.amountFormat(a,i);s&&this.afterInputChange(s,t)},this.onMaxClick=e=>{const t=e=>{const{tokenBalanceMap:t}=this.props.pool,a=t[e]?t[e]:new p.a(0);return e?a.toString():a.gt(.01)?a.minus(.01).toString():"0"};if("token0"===e){const{token0Info:a}=this.state;return void this.afterInputChange(t(a.address),e)}const{token1Info:a}=this.state;this.afterInputChange(t(a.address),e)},this.onSupplyClick=async()=>{const{address:e}=this.props.pool,{token0Info:t,token1Info:a,token0Amount:n,token1Amount:o}=this.state;if(!e)return;if(!n||!o)return;this.setState({btnDisabled:!0});const{allowance:i}=await Object(w.C)(e,t);if(new p.a(n).gt(i)){if(!await Object(w.D)(t))return void this.setState({btnDisabled:!1})}const{allowance:s}=await Object(w.C)(e,a);if(new p.a(o).gt(s)){if(!await Object(w.D)(a))return void this.setState({btnDisabled:!1})}const l=await Object(w.e)({token0Info:t,token1Info:a,token0Amount:n,token1Amount:o,to:e});this.setState({btnDisabled:!1}),l&&setTimeout(()=>{this.getUserPairInfo({once:!0})},3e3)},this.onHeaderCloseClick=()=>{this.props.history.push(b.liquidity)},this.state={pairLoaded:!1,token0Info:{},token1Info:{},token0Amount:"",token1Amount:"",token0Exact:!0,pairInfo:{},poolShare:"0",token0Price:"--",token1Price:"--",initialToken0Price:"--",initialToken1Price:"--",initialPoolShare:"0",btnDisabled:!1}}render(){const{pairLoaded:e,token0Info:t,token1Info:a,token0Amount:n,token1Amount:o,pairInfo:s,poolShare:l,token0Price:d,token1Price:p,initialToken0Price:E,initialToken1Price:w,initialPoolShare:v,btnDisabled:b}=this.state,{allTokenMap:I}=this.props.pool;return i.a.createElement("div",{id:"swap-add-main"},i.a.createElement(u.i,null,i.a.createElement(g.a,{title:r.a.get("swap.title"),desc:r.a.get("swap.desc"),type:"liquidity"}),i.a.createElement("div",{className:"swap-main-page"},i.a.createElement(u.e,null,i.a.createElement("div",{className:"swap-main-card"},i.a.createElement(h.a,{title:r.a.get("swap.add.title"),desc:r.a.get("swap.add.desc"),closable:!0,onHeaderClose:this.onHeaderCloseClick}),i.a.createElement("div",{className:"swap-main-card-body"},e?i.a.createElement(i.a.Fragment,null,s.notToken||s.address&&s.totalSupply.gt(0)?i.a.createElement(i.a.Fragment,null):i.a.createElement("div",{className:"swap-add-price-info"},i.a.createElement("div",{className:"swap-main-warning"},i.a.createElement("div",null,i.a.createElement(c.a,null)),i.a.createElement("div",null,r.a.getHTML("swap.add.firstLp"))))):i.a.createElement(i.a.Fragment,null),i.a.createElement(k.a,{ref:this.inputTokenRef,curToken:t,otherToken:a,onTokenChange:this.onToken0Change}),i.a.createElement(u.h,{placeholder:"0.0",value:n,enterButton:r.a.get("swap.max"),onChange:e=>this.onInputChange(e,"token0"),onSearch:()=>this.onMaxClick("token0")}),i.a.createElement("div",{className:"swap-main-icon-row"},i.a.createElement("div",null,i.a.createElement(m.a,null))),i.a.createElement(k.a,{ref:this.outputTokenRef,curToken:a,otherToken:t,onTokenChange:this.onToken1Change}),i.a.createElement(u.h,{placeholder:"0.0",value:o,enterButton:r.a.get("swap.max"),onChange:e=>this.onInputChange(e,"token1"),onSearch:()=>this.onMaxClick("token1")}),e?i.a.createElement(i.a.Fragment,null,s.notToken?i.a.createElement(i.a.Fragment,null):s.address&&s.totalSupply.gt(0)?i.a.createElement("div",{className:"swap-add-price-info"},i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null,r.a.get("swap.shareOfPool")),i.a.createElement("div",null,l,"%")),i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null,r.a.get("swap.price")),i.a.createElement("div",null,"".concat(d," ").concat(r.a.get("swap.priceInfo",{token0:s.token0.symbol,token1:s.token1.symbol})))),i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null),i.a.createElement("div",null,"".concat(p," ").concat(r.a.get("swap.priceInfo",{token0:s.token1.symbol,token1:s.token0.symbol}))))):i.a.createElement("div",{className:"swap-add-price-info"},i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null,r.a.get("swap.shareOfPool")),i.a.createElement("div",null,v,"%")),i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null,r.a.get("swap.add.initialPrice")),i.a.createElement("div",null,"".concat(E," ").concat(r.a.get("swap.priceInfo",{token0:t.symbol,token1:a.symbol})))),i.a.createElement("div",{className:"swap-add-info-row"},i.a.createElement("div",null),i.a.createElement("div",null,"".concat(w," ").concat(r.a.get("swap.priceInfo",{token0:a.symbol,token1:t.symbol}))))),s.notToken?i.a.createElement(i.a.Fragment,null):i.a.createElement("div",{className:"swap-add-btn"},i.a.createElement(u.d,{disabled:b,onClick:this.onSupplyClick},r.a.get("swap.add.supplyButton")))):i.a.createElement("div",{className:"swap-add-loading"},i.a.createElement(u.j,null))),i.a.createElement(f.a,{pairInfo:s,allTokenMap:I}))))))}})||n)||n;t.default=I}}]);